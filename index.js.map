{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '48807004-9385a8cdcbe3c5aa2453a42f7';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 40;\n\nexport async function fetchImages(query, page = 1) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: PER_PAGE,\n                page,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}   ","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    const markup = images.map(image => `\n          <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\"/>\n                <div class=\"info\">\n                <p>Likes</p>\n                <p>Views</p>\n                <p>Comments</p>\n                <p>Downloads</p>\n                    <span> ${image.likes}</span>\n                    <span> ${image.views}</span>\n                    <span> ${image.comments}</span>\n                    <span> ${image.downloads}</span>\n                </div>\n            </a>\n     </li>\n    `).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    \n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    document.querySelector('.gallery').innerHTML = '';\n}\n\n","import { fetchImages } from './js/pixabay-api';\nimport { renderImages, clearGallery } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst inputField = form.elements.searchQuery;\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.classList.add('load-more');\ndocument.body.appendChild(loadMoreBtn);\nloadMoreBtn.style.display = 'none';\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', async function(event) {\n    event.preventDefault();\n    \n    currentQuery = event.target.elements.searchQuery.value.trim();\n    if (!currentQuery) {\n        iziToast.error({ message: 'Please enter a search term!' });\n        return;\n    }\n    \n    currentPage = 1;\n    clearGallery();\n    loadMoreBtn.style.display = 'none';\n    loader.style.display = 'block';\n    \n    try {\n        const data = await fetchImages(currentQuery, currentPage);\n        totalHits = data.totalHits;\n        \n        if (data.hits.length === 0) {\n            iziToast.warning({ message: 'No images found. Try another query!' });\n        } else {\n            renderImages(data.hits);\n            if (data.totalHits > 40) loadMoreBtn.style.display = 'block';\n            inputField.value = '';\n        }\n    } catch {\n        iziToast.error({ message: 'Failed to fetch images. Try again later!' });\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\n//loadmore\nloadMoreBtn.addEventListener('click', async function() {\n    currentPage += 1;\n    loader.style.display = 'block';\n    \n    try {\n        const data = await fetchImages(currentQuery, currentPage);\n        renderImages(data.hits);\n        \n        if (currentPage * 40 >= totalHits) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({ message: \"You've reached the end of search results.\" });\n        }\n\n        const firstImageCard = document.querySelector('.image-card');\n        if (firstImageCard) {\n            const  height  = firstImageCard.getBoundingClientRect();\n            window.scrollBy({ top: height * 2, behavior: 'smooth' });\n        }\n\n    } catch (error) {\n        console.error(error);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","axios","error","renderImages","images","gallery","markup","image","SimpleLightbox","clearGallery","form","inputField","loader","loadMoreBtn","currentQuery","currentPage","totalHits","event","iziToast","data","firstImageCard","height"],"mappings":"owBACA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAW,GAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAC/C,GAAI,CAYA,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAAG,CACH,CACb,CAAS,GACe,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACT,CACL,CCnBO,SAASC,EAAaC,EAAQ,CACjC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EAAO,IAAIG,GAAS;AAAA;AAAA,uBAEhBA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAMrCA,EAAM,KAAK;AAAA,6BACXA,EAAM,KAAK;AAAA,6BACXA,EAAM,QAAQ;AAAA,6BACdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAIvC,EAAE,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,EAE7B,IAAIE,EAAe,YAAY,EACvC,QAAO,CACpB,CAEO,SAASC,GAAe,CAC3B,SAAS,cAAc,UAAU,EAAE,UAAY,EACnD,CC1BA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAaD,EAAK,SAAS,YAC3BE,EAAS,SAAS,cAAc,SAAS,EAC/B,SAAS,cAAc,UAAU,EACjD,MAAMC,EAAc,SAAS,cAAc,QAAQ,EACnDA,EAAY,YAAc,YAC1BA,EAAY,UAAU,IAAI,WAAW,EACrC,SAAS,KAAK,YAAYA,CAAW,EACrCA,EAAY,MAAM,QAAU,OAE5B,IAAIC,EAAe,GACfC,EAAc,EACdC,EAAY,EAEhBN,EAAK,iBAAiB,SAAU,eAAeO,EAAO,CAIlD,GAHAA,EAAM,eAAc,EAEpBH,EAAeG,EAAM,OAAO,SAAS,YAAY,MAAM,OACnD,CAACH,EAAc,CACfI,EAAS,MAAM,CAAE,QAAS,6BAA+B,CAAA,EACzD,MACH,CAEDH,EAAc,EACdN,IACAI,EAAY,MAAM,QAAU,OAC5BD,EAAO,MAAM,QAAU,QAEvB,GAAI,CACA,MAAMO,EAAO,MAAMrB,EAAYgB,EAAcC,CAAW,EACxDC,EAAYG,EAAK,UAEbA,EAAK,KAAK,SAAW,EACrBD,EAAS,QAAQ,CAAE,QAAS,qCAAuC,CAAA,GAEnEf,EAAagB,EAAK,IAAI,EAClBA,EAAK,UAAY,KAAIN,EAAY,MAAM,QAAU,SACrDF,EAAW,MAAQ,GAE/B,MAAY,CACJO,EAAS,MAAM,CAAE,QAAS,0CAA4C,CAAA,CAC9E,QAAc,CACNN,EAAO,MAAM,QAAU,MAC1B,CACL,CAAC,EAGDC,EAAY,iBAAiB,QAAS,gBAAiB,CACnDE,GAAe,EACfH,EAAO,MAAM,QAAU,QAEvB,GAAI,CACA,MAAMO,EAAO,MAAMrB,EAAYgB,EAAcC,CAAW,EACxDZ,EAAagB,EAAK,IAAI,EAElBJ,EAAc,IAAMC,IACpBH,EAAY,MAAM,QAAU,OAC5BK,EAAS,KAAK,CAAE,QAAS,2CAA6C,CAAA,GAG1E,MAAME,EAAiB,SAAS,cAAc,aAAa,EAC3D,GAAIA,EAAgB,CAChB,MAAOC,EAAUD,EAAe,wBAChC,OAAO,SAAS,CAAE,IAAKC,EAAS,EAAG,SAAU,QAAQ,CAAE,CAC1D,CAEJ,OAAQnB,EAAO,CACZ,QAAQ,MAAMA,CAAK,CAC3B,QAAc,CACNU,EAAO,MAAM,QAAU,MAC1B,CACL,CAAC"}